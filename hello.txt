<template>
    <form action="" class="d-flex flex-column p-4">
        <div class="mb-4 d-flex">
            <input class="px-2 py-1 border-0 shadow-sm w-50" type="text" v-model="first_name" placeholder="First name">
            <input class="px-2 py-1 border-0 shadow-sm w-50 ms-1" type="text" v-model="last_name" placeholder="Last name">
        </div>
        <div class="mb-4 d-flex align-items-center justify-content-between">
            <label for="birthday" class="mx-2">Birthday</label>
            <input class="px-2 py-1 border-0 shadow-sm w-100" type="date" v-model="birthday" id="birthday">
        </div>
        <div class="mb-4">
            <input class="px-2 py-1 border-0 shadow-sm w-100" type="email" v-model="email" placeholder="Email">
        </div>
        <div class="mb-4">
            <input class="px-2 py-1 border-0 shadow-sm w-100" type="password" v-model="password" placeholder="Password">
        </div>
        <div class="mb-4">
            <input class="px-2 py-1 border-0 shadow-sm w-100" type="password" v-model="password_confirmation" placeholder="Password Confirmation">
        </div>
        <button class="my-3" disabled="false" @click.prevent="signUp()">Register</button>
        <p>Already Have An Account? <router-link to="/sign-in">sign-in</router-link></p>
    </form>
</template>

<script>
import { useStore } from 'pinia';
import { defineComponent,ref } from 'vue';
import { userStore } from '../stores/userStore';

export default defineComponent({
    setup() {
    const store = useStore(userStore);
    const first_name = ref('');
    const last_name = ref('');
    const birthday = ref('');
    const email = ref('');
    const password = ref('');
    const password_confirmation = ref('');

    function signUp() {
        let data = {
            first_name: first_name.value ,
            last_name: last_name.value ,
            birthday: birthday.value ,
            email: email.value ,
            password: password.value ,
            password_confirmation: password_confirmation.value ,
        }
        store.signUp(data);
    }
    function valid() {
        let data = {
            first_name: first_name.value ,
            last_name: last_name.value ,
            birthday: birthday.value ,
            email: email.value ,
            password: password.value ,
            password_confirmation: password_confirmation.value ,
        }
        store.signUp(data);
    }

    return { 
            first_name,
            last_name,
            birthday,
            email,
            password,
            password_confirmation,
            signUp
        };
    },
})
</script>

<style scoped>
template{
    background-image: url(../assets/images/3185113.jpg);
}
form{
    width: 340px;
    box-shadow: 0 0 20px #ffd5004b;
    border-radius: 5px;
}
label{
    color: rgb(119, 118, 118);
}
input:focus{
    border: none;
    background: #ffd5004b;
}
</style>






import { createPinia } from 'pinia';
import axios from 'axios';

export const userStore = createPinia({
    id:'user',
    state: () => ({
        user: null,
        message: null,
    }),
    actions: {
        async signUp(data) {
            try {
                const response = await axios.post('/api/user', { data });
                this.message = response.data;
            } catch (error) {
                console.error(error);
            }
        },
    },
});



